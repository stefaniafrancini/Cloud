<div class="login-container">
  <div class="bg-blob blob-1"></div>
  <div class="bg-blob blob-2"></div>
  <div class="bg-blob blob-3"></div>

  <div class="login-card" role="region" aria-label="Restablecer contraseña - Mi Ropero">
    <div class="brand">
      <div class="brand-mark" aria-hidden="true">
        <svg viewBox="0 0 24 24" class="hanger">
          <path
            d="M12 3a3 3 0 0 1 1.2 5.76l-.2.09v.9l6.93 4.13a1.5 1.5 0 0 1-.75 2.79H4.82a1.5 1.5 0 0 1-.75-2.79L11 9.75V8.85l-.2-.09A3 3 0 1 1 12 3Z" />
        </svg>
      </div>
      <h1 class="brand-title">Mi Ropero</h1>
      <p class="brand-subtitle">Tu armario, tus reglas</p>
    </div>

    <h2 class="login-title">Restablecer contraseña</h2>

    <form (ngSubmit)="onSubmit()" novalidate>
      <!-- Usuario o email -->
      <div class="form-group">
        <label for="username">Usuario (o email)</label>
        <div class="input-wrap">
          <span class="input-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path
                d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z" />
            </svg>
          </span>
          <input
            id="username"
            type="text"
            class="form-control"
            [(ngModel)]="username"
            name="username"
            autocomplete="username"
          />
        </div>
        <p class="hint">Podés dejar usuario vacío y usar solo email abajo.</p>
      </div>

      <div class="form-group">
        <label for="email">Email (opcional)</label>
        <div class="input-wrap">
          <span class="input-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path
                d="M4 4h16a2 2 0 0 1 2 2v1.18l-10 5.55L2 7.18V6a2 2 0 0 1 2-2Zm0 6.25 7.45 4.14a1 1 0 0 0 .94 0L20 10.25V18a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2Z" />
            </svg>
          </span>
          <input
            id="email"
            type="email"
            class="form-control"
            [(ngModel)]="email"
            name="email"
            autocomplete="email"
          />
        </div>
      </div>

      <!-- Nueva contraseña -->
      <div class="form-group">
        <label for="newPassword">Nueva contraseña</label>
        <div class="input-wrap">
          <span class="input-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path
                d="M17 8h-1V6a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Zm-7-2a2 2 0 0 1 4 0v2H10Zm3 9.73V17a1 1 0 0 1-2 0v-1.27a2 2 0 1 1 2 0Z" />
            </svg>
          </span>
          <input
            id="newPassword"
            type="password"
            class="form-control"
            [(ngModel)]="newPassword"
            name="newPassword"
            required
          />
        </div>
      </div>

      <!-- Confirmar nueva contraseña -->
      <div class="form-group">
        <label for="confirmPassword">Confirmar nueva contraseña</label>
        <div class="input-wrap">
          <span class="input-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path
                d="M17 8h-1V6a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Zm-7-2a2 2 0 0 1 4 0v2H10Zm3 9.73V17a1 1 0 0 1-2 0v-1.27a2 2 0 1 1 2 0Z" />
            </svg>
          </span>
          <input
            id="confirmPassword"
            type="password"
            class="form-control"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            required
          />
        </div>
      </div>

      <button class="btn-login" type="submit">Actualizar contraseña</button>

      <p class="error-text" *ngIf="error">{{ error }}</p>
      <p class="success-text" *ngIf="success">{{ success }}</p>

      <div class="form-extra">
        <a class="link" (click)="irALogin()">Volver al inicio de sesión</a>
      </div>
    </form>
  </div>
</div>
